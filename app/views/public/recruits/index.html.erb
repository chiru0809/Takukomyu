<div class="container">
  <div class="d-flex align-items-center px-3 pt-3 mt-2">
    <h4 class="border-bottom border-primary border-3 page-title">メンバー募集</h4>
  </div>

  <div class="d-flex align-items-center px-3 pb-2 my-2">
    <% if user_signed_in? %>
      <%= link_to new_recruit_path, class: "btn btn-primary mr-2" do %>
        <i class="fa-solid fa-dice"></i> メンバーを募集する
      <% end %>
      <%= link_to drafts_path, class: "btn btn-draft" do %>
        <i class="fa-regular fa-pen-to-square"></i> 下書き
      <% end %>
    <% end %>
    <div class="ml-auto">
      <%= form_tag({controller:"recruits",action:"index"}, method: :get) do %>
        <%= select_tag :search, options_from_collection_for_select(Title.all, :id, :name) %>
        <%= submit_tag '検索する' %>
      <% end %>
      <%= link_to "条件クリア", recruits_path, class: "btn btn-secondary mt-1" %>
    </div>
  </div>

  <div class="my-2 p-3 bg-white rounded shadow-sm">
    <table class="table">
      <thead class="thead-light">
        <tr>
          <th>ユーザー名</th>
          <th>シナリオ名</th>
          <th>タイトル</th>
          <th>更新日</th>
        </tr>
      </thead>
      <tbody>
        <% @recruits.each do |recruit| %>
          <tr>
            <td class="pt-2 pr-2">
              <%= link_to user_path(recruit.user.id) do %>
                <%= image_tag recruit.user.get_profile_image.variant(resize: "60x60!") %>
                <%= recruit.user.name %>
              <% end %>
            </td>
            <td class="align-middle">
              <%= link_to recruit_path(recruit.id) do %>
                <%= recruit.scenario_name %>
              <% end %>
            </td>
            <td class="align-middle">
              <span class="p-2 text-dark"><%= recruit.title.name %></span>
            </td>
            <td class="align-middle">
              <%= recruit.updated_at.strftime('%Y/%m/%d') %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
  <div class="pagenation">
    <%= paginate @recruits %>
  </div>
</div>